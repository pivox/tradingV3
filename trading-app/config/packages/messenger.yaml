framework:
    messenger:
        transports:
            order_timeout:
                dsn: 'doctrine://default?queue_name=order_timeout'
                options:
                    table_name: messenger_messages_order_timeout
                    auto_setup: true
            mtf_projection:
                dsn: 'doctrine://default?queue_name=mtf_projection'
                options:
                    table_name: messenger_messages_mtf_projection
                    auto_setup: true
            mtf_decision:
                dsn: 'doctrine://default?queue_name=mtf_decision'
                options:
                    table_name: messenger_messages_mtf_decision
                    auto_setup: true
            failed_order_timeout:
                dsn: 'doctrine://default?table_name=messenger_messages_failed'
                options:
                    auto_setup: true
                retry_strategy:
                    max_retries: 3
                    delay: 5000 # 5 seconds
                    multiplier: 2.0
                    max_delay: 60000
        failure_transport: failed_order_timeout
        routing:
            App\TradeEntry\Message\CancelOrderMessage: order_timeout
            App\TradeEntry\Message\LimitFillWatchMessage: order_timeout
            App\TradeEntry\Message\OutOfZoneWatchMessage: order_timeout
            App\MtfValidator\Message\MtfResultProjectionMessage: mtf_projection
            App\Indicator\Message\IndicatorSnapshotProjectionMessage: mtf_projection
            App\Indicator\Message\IndicatorSnapshotPersistRequestMessage: mtf_projection
            App\MtfValidator\Message\MtfTradingDecisionMessage: mtf_decision
